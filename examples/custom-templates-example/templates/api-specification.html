<h1>API 接口规范文档</h1>

<p><strong>API 名称：</strong> </p>
<p><strong>版本：</strong> v1.0.0</p>
<p><strong>负责人：</strong> </p>
<p><strong>最后更新：</strong> YYYY-MM-DD</p>

<h2>概述</h2>

<h3>基本信息</h3>
<ul>
  <li><strong>Base URL：</strong> <code>https://api.example.com/v1</code></li>
  <li><strong>协议：</strong> HTTPS</li>
  <li><strong>认证方式：</strong> Bearer Token / API Key</li>
  <li><strong>数据格式：</strong> JSON</li>
  <li><strong>字符编码：</strong> UTF-8</li>
</ul>

<h3>API 特性</h3>
<ul>
  <li>RESTful 风格</li>
  <li>支持 CORS 跨域</li>
  <li>请求频率限制：100 次/分钟</li>
  <li>支持批量操作</li>
  <li>支持分页查询</li>
</ul>

<h2>认证</h2>

<h3>获取 Token</h3>

<p><strong>请求：</strong></p>
<pre><code>POST /auth/token
Content-Type: application/json

{
  "username": "user@example.com",
  "password": "your-password"
}</code></pre>

<p><strong>响应：</strong></p>
<pre><code>{
  "access_token": "eyJhbGciOiJIUzI1NiIs...",
  "token_type": "Bearer",
  "expires_in": 3600
}</code></pre>

<h3>使用 Token</h3>

<p>在请求头中添加：</p>
<pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIs...</code></pre>

<h2>接口列表</h2>

<h3>1. 用户管理</h3>

<h4>1.1 获取用户列表</h4>

<table>
  <tbody>
    <tr>
      <td><strong>接口地址</strong></td>
      <td><code>GET /users</code></td>
    </tr>
    <tr>
      <td><strong>功能说明</strong></td>
      <td>获取用户列表，支持分页和筛选</td>
    </tr>
    <tr>
      <td><strong>认证要求</strong></td>
      <td>需要认证</td>
    </tr>
  </tbody>
</table>

<p><strong>请求参数：</strong></p>
<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>类型</th>
      <th>必填</th>
      <th>说明</th>
      <th>示例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>page</td>
      <td>integer</td>
      <td>否</td>
      <td>页码，默认 1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>page_size</td>
      <td>integer</td>
      <td>否</td>
      <td>每页数量，默认 20，最大 100</td>
      <td>20</td>
    </tr>
    <tr>
      <td>status</td>
      <td>string</td>
      <td>否</td>
      <td>用户状态：active, inactive</td>
      <td>active</td>
    </tr>
    <tr>
      <td>keyword</td>
      <td>string</td>
      <td>否</td>
      <td>搜索关键词（用户名、邮箱）</td>
      <td>zhang</td>
    </tr>
  </tbody>
</table>

<p><strong>请求示例：</strong></p>
<pre><code>GET /users?page=1&page_size=20&status=active</code></pre>

<p><strong>响应示例：</strong></p>
<pre><code>{
  "code": 200,
  "message": "success",
  "data": {
    "total": 100,
    "page": 1,
    "page_size": 20,
    "users": [
      {
        "id": 1,
        "username": "zhangsan",
        "email": "zhangsan@example.com",
        "status": "active",
        "created_at": "2024-01-01T10:00:00Z"
      }
    ]
  }
}</code></pre>

<h4>1.2 创建用户</h4>

<table>
  <tbody>
    <tr>
      <td><strong>接口地址</strong></td>
      <td><code>POST /users</code></td>
    </tr>
    <tr>
      <td><strong>功能说明</strong></td>
      <td>创建新用户</td>
    </tr>
    <tr>
      <td><strong>认证要求</strong></td>
      <td>需要管理员权限</td>
    </tr>
  </tbody>
</table>

<p><strong>请求参数：</strong></p>
<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>类型</th>
      <th>必填</th>
      <th>说明</th>
      <th>示例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>string</td>
      <td>是</td>
      <td>用户名，3-20 个字符</td>
      <td>zhangsan</td>
    </tr>
    <tr>
      <td>email</td>
      <td>string</td>
      <td>是</td>
      <td>邮箱地址</td>
      <td>zhangsan@example.com</td>
    </tr>
    <tr>
      <td>password</td>
      <td>string</td>
      <td>是</td>
      <td>密码，至少 8 位</td>
      <td>Password123!</td>
    </tr>
    <tr>
      <td>role</td>
      <td>string</td>
      <td>否</td>
      <td>角色：admin, user，默认 user</td>
      <td>user</td>
    </tr>
  </tbody>
</table>

<p><strong>请求示例：</strong></p>
<pre><code>POST /users
Content-Type: application/json

{
  "username": "zhangsan",
  "email": "zhangsan@example.com",
  "password": "Password123!",
  "role": "user"
}</code></pre>

<p><strong>响应示例：</strong></p>
<pre><code>{
  "code": 201,
  "message": "User created successfully",
  "data": {
    "id": 1,
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "role": "user",
    "created_at": "2024-01-01T10:00:00Z"
  }
}</code></pre>

<h4>1.3 获取用户详情</h4>

<table>
  <tbody>
    <tr>
      <td><strong>接口地址</strong></td>
      <td><code>GET /users/{id}</code></td>
    </tr>
    <tr>
      <td><strong>功能说明</strong></td>
      <td>获取指定用户的详细信息</td>
    </tr>
    <tr>
      <td><strong>认证要求</strong></td>
      <td>需要认证</td>
    </tr>
  </tbody>
</table>

<p><strong>路径参数：</strong></p>
<table>
  <thead>
    <tr>
      <th>参数名</th>
      <th>类型</th>
      <th>说明</th>
      <th>示例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>integer</td>
      <td>用户 ID</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h4>1.4 更新用户</h4>

<table>
  <tbody>
    <tr>
      <td><strong>接口地址</strong></td>
      <td><code>PUT /users/{id}</code></td>
    </tr>
    <tr>
      <td><strong>功能说明</strong></td>
      <td>更新用户信息</td>
    </tr>
    <tr>
      <td><strong>认证要求</strong></td>
      <td>需要认证（本人或管理员）</td>
    </tr>
  </tbody>
</table>

<h4>1.5 删除用户</h4>

<table>
  <tbody>
    <tr>
      <td><strong>接口地址</strong></td>
      <td><code>DELETE /users/{id}</code></td>
    </tr>
    <tr>
      <td><strong>功能说明</strong></td>
      <td>删除用户（软删除）</td>
    </tr>
    <tr>
      <td><strong>认证要求</strong></td>
      <td>需要管理员权限</td>
    </tr>
  </tbody>
</table>

<h2>通用响应格式</h2>

<h3>成功响应</h3>

<pre><code>{
  "code": 200,
  "message": "success",
  "data": {
    // 业务数据
  }
}</code></pre>

<h3>错误响应</h3>

<pre><code>{
  "code": 400,
  "message": "Invalid parameters",
  "errors": [
    {
      "field": "email",
      "message": "Invalid email format"
    }
  ]
}</code></pre>

<h2>错误码说明</h2>

<table>
  <thead>
    <tr>
      <th>错误码</th>
      <th>说明</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200</td>
      <td>OK</td>
      <td>请求成功</td>
    </tr>
    <tr>
      <td>201</td>
      <td>Created</td>
      <td>资源创建成功</td>
    </tr>
    <tr>
      <td>400</td>
      <td>Bad Request</td>
      <td>请求参数错误</td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized</td>
      <td>未认证或认证失败</td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden</td>
      <td>无权限访问</td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found</td>
      <td>资源不存在</td>
    </tr>
    <tr>
      <td>429</td>
      <td>Too Many Requests</td>
      <td>请求频率超限</td>
    </tr>
    <tr>
      <td>500</td>
      <td>Internal Server Error</td>
      <td>服务器内部错误</td>
    </tr>
    <tr>
      <td>503</td>
      <td>Service Unavailable</td>
      <td>服务暂时不可用</td>
    </tr>
  </tbody>
</table>

<h2>业务错误码</h2>

<table>
  <thead>
    <tr>
      <th>错误码</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1001</td>
      <td>用户名已存在</td>
    </tr>
    <tr>
      <td>1002</td>
      <td>邮箱已被注册</td>
    </tr>
    <tr>
      <td>1003</td>
      <td>密码强度不够</td>
    </tr>
    <tr>
      <td>2001</td>
      <td>Token 已过期</td>
    </tr>
    <tr>
      <td>2002</td>
      <td>Token 无效</td>
    </tr>
  </tbody>
</table>

<h2>频率限制</h2>

<ul>
  <li><strong>限制：</strong> 100 次/分钟</li>
  <li><strong>响应头：</strong>
    <ul>
      <li><code>X-RateLimit-Limit</code>: 总限制次数</li>
      <li><code>X-RateLimit-Remaining</code>: 剩余次数</li>
      <li><code>X-RateLimit-Reset</code>: 重置时间（Unix 时间戳）</li>
    </ul>
  </li>
</ul>

<h2>版本控制</h2>

<p>API 版本通过 URL 路径指定：</p>
<ul>
  <li>v1: <code>https://api.example.com/v1</code></li>
  <li>v2: <code>https://api.example.com/v2</code>（开发中）</li>
</ul>

<h2>SDK 和示例代码</h2>

<h3>JavaScript/Node.js</h3>

<pre><code>const axios = require('axios');

const api = axios.create({
  baseURL: 'https://api.example.com/v1',
  headers: {
    'Authorization': 'Bearer YOUR_TOKEN'
  }
});

// 获取用户列表
const users = await api.get('/users', {
  params: { page: 1, page_size: 20 }
});</code></pre>

<h3>Python</h3>

<pre><code>import requests

headers = {
    'Authorization': 'Bearer YOUR_TOKEN'
}

# 获取用户列表
response = requests.get(
    'https://api.example.com/v1/users',
    headers=headers,
    params={'page': 1, 'page_size': 20}
)</code></pre>

<h2>变更日志</h2>

<table>
  <thead>
    <tr>
      <th>版本</th>
      <th>日期</th>
      <th>变更内容</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>v1.0.0</td>
      <td>2024-01-01</td>
      <td>初始版本发布</td>
    </tr>
  </tbody>
</table>

<h2>联系方式</h2>

<ul>
  <li><strong>技术支持：</strong> api-support@example.com</li>
  <li><strong>文档反馈：</strong> docs@example.com</li>
  <li><strong>问题跟踪：</strong> https://github.com/example/api/issues</li>
</ul>
